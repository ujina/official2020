---
layout: post
title: Hexo ブログ再開のために
date: 2017-11-17 13:59:22
tags:
id: 1117_1359_hexo
---

エディタにまっしろからのブログ投稿。
しばらく投稿していなかった。Hexo での投稿の流れを振り返ってみる。

執筆環境は２台に構築してある

端末はThinkPad または　iMac　で行っている。テキストを入力していく環境として、である。アップロードは現状（制限はあるにせよあえて）Macminiにて行う。

ThinkPadでコマンドプロンプトからblog に移動し、hexo new title　とすればMarkDownファイルが作成される。エディタからそのファイルにアクセスして入力。

<!--more-->

### クラウドにMarkDownファイル保存

ここからがクラウド環境の活用。書けたらMarkDownファイルをドロップボックスに保存する。

母艦のiMacに戻ったらアップロード。静的サイトジェネレータ的にはジェネレート＆デプロイ。

これでhexo で作っている公式サイトにアップロードされる。

https://ujina.github.io/official/

このサイトには、WordPressで書いた投稿が移転されているが、投稿中の画像リンクと画像の移転がすんでいない。ここをやろうとしてひと月以上止まってしまった。

もっとも、現状ではWordPress旧サイトにドメインURLが向いているので問題なく表示されている。これがこれから運用したいhexoサイトにドメインを向けたとたん、正常に表示されなくなる。

既存ドメインをhexoサイトにむけるやり方も要確認。

以上の移植移転作業をなるべく早くやりたい。
２時間もとれたら移植移転ができるだろうか。やることの内訳としては、以下のようになるだろう。

１　画像を移動してアップロード。画像そのもののファイル名の変更は不要。
２　投稿中の画像リンクの書き換え。WordPressからHexo用のリンクに書き換える。この際、該当する文字列をすべて検索＆置換して、一発でやりたい。まさにエディタを使っていて便利なところだから。
３　きちんと表示されるかを確認
４　３の前段階でドメインをhexoブログに向けることが必要。

github.io にドメインを向けるやりかたもチェック。ドメインはお名前ドットコムで取得して管理されているから、お名前ドットコムでの設定となる。

### hexoの投稿title

話は変わってhexoでの投稿titleの件。
新規投稿を作るときにファイルを立ち上げるのにまずtitleを決める必要がある。しかしtitleはブログ投稿の頭に表示されるので投稿内容を作ってみてから決めることになる。だから、新規投稿を立ち上げるときのtitleは仮のものでしかない。この点はWordPressを使っていてもそうなる。

現状ではその日の日付を今日であれば20171117のように文字列でいれる。

ここからが問題である。ブログ投稿の頭に表示されるタイトルはフロントマター内の該当箇所を修正して行う。これはこれでよい。

同時にパーマリンクの問題も絡んでくる。

つまりhexoではタイトル文字列を投稿パーマリンクに設定することもできるので、その場合はパーマリンクにはどこで入力した文字列が反映していくかを意識しておかないといけない。

ただ、公式hexoではWordPressサイト時代のパーマリンクを引き継ぐべく、パーマリンクには投稿idを使おうとしている。ここは動かせないもの、現状保存の点から決まっていることなので、より便利な方法を選ぶはなしではなくなっている。

だから、投稿の作業としてこうなる。

新規投稿時にタイトルとしてその日の日付を文字列で使う
書きながら投稿タイトルとして内容を反映させたものをフロントマター内の該当箇所に書く
さらに投稿IDをフロントマター内に付与する。使えるIDの確認と普段からの管理も必要になる（ここがネックになりそうで、だからこそhexoはじめ静的サイトジェネレーターはファイル名をパーマリンクに標準設定している）。
こうして最後にMarkDownファイルの名前として新規投稿立ち上げ時に付与した文字列が残ることになる。こちらは作業端末とドロップボックスのファイル管理上で使っていくものとなる。

続きはまたにしてひとまず。

MarkDownファイルとして起動するんだから、見出しの書き方くらいはベタうち段階でやっていこう。次はぜひ。というか離れていたのでMarkDownでの見出しの記法を忘れてしまっている。繰り返して定着させよう。